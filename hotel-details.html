<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل الفندق - Paygo.com</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: #f8f9fa;
            direction: rtl;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .hotel-header {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .image-gallery {
            position: relative;
            height: 400px;
        }

        .swiper {
            width: 100%;
            height: 100%;
        }

        .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .swiper-button-next,
        .swiper-button-prev {
            color: white;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 40px;
            height: 40px;
        }

        .swiper-pagination-bullet-active {
            background: #667eea;
        }

        .hotel-info-header {
            padding: 30px;
        }

        .hotel-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .hotel-location {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hotel-rating {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stars {
            color: #ffd700;
            font-size: 1.2rem;
        }

        .rating-score {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: 600;
        }

        .reviews-count {
            color: #666;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }

        .hotel-details {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #eee;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .tab.active {
            border-bottom-color: #667eea;
            color: #667eea;
        }

        .tab-content {
            padding: 30px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .description {
            color: #666;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .amenity-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9ff;
            border-radius: 10px;
            border: 1px solid #e0e6ff;
        }

        .amenity-icon {
            color: #667eea;
            width: 20px;
        }

        .room-types {
            display: grid;
            gap: 20px;
        }

        .room-card {
            border: 1px solid #eee;
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .room-card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .room-header {
            display: grid;
            grid-template-columns: 150px 1fr auto;
            gap: 20px;
            padding: 20px;
        }

        .room-image {
            border-radius: 8px;
            overflow: hidden;
        }

        .room-image img {
            width: 100%;
            height: 100px;
            object-fit: cover;
        }

        .room-info h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .room-features {
            color: #666;
            font-size: 0.9rem;
        }

        .room-price {
            text-align: center;
        }

        .room-price-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
        }

        .room-price-per {
            color: #666;
            font-size: 0.9rem;
        }

        .reviews-section {
            display: grid;
            gap: 20px;
        }

        .review-summary {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .review-score {
            font-size: 3rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }

        .review-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .review-category {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .review-bar {
            width: 100px;
            height: 8px;
            background: #eee;
            border-radius: 4px;
            overflow: hidden;
        }

        .review-bar-fill {
            height: 100%;
            background: #667eea;
            transition: width 0.3s ease;
        }

        .review-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #eee;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .reviewer-name {
            font-weight: 600;
            color: #333;
        }

        .review-date {
            color: #666;
            font-size: 0.9rem;
        }

        .review-rating {
            color: #ffd700;
        }

        .booking-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 20px;
            height: fit-content;
        }

        .booking-price {
            text-align: center;
            margin-bottom: 25px;
        }

        .original-price {
            color: #999;
            text-decoration: line-through;
            font-size: 1.1rem;
        }

        .current-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin: 10px 0;
        }

        .price-per-night {
            color: #666;
        }

        .discount-badge {
            background: #ff6b6b;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 10px;
            display: inline-block;
        }

        .booking-dates {
            margin-bottom: 25px;
        }

        .date-group {
            margin-bottom: 15px;
        }

        .date-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .date-group input,
        .date-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Cairo', sans-serif;
        }

        .booking-summary {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .summary-row.total {
            font-weight: 700;
            font-size: 1.1rem;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            margin-top: 15px;
        }

        .book-now-btn {
            width: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            margin-bottom: 15px;
        }

        .book-now-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .secure-booking {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        .secure-booking i {
            color: #51cf66;
            margin-left: 5px;
        }

        .map-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .map-placeholder {
            width: 100%;
            height: 300px;
            background: #f0f0f0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.1rem;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .booking-card {
                position: static;
                order: -1;
            }

            .hotel-title {
                font-size: 2rem;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
            }

            .room-header {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .review-categories {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-plane"></i> Paygo.com
            </div>
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-right"></i>
                العودة للنتائج
            </button>
        </div>
    </div>

    <div class="container">
        <!-- Hotel Header -->
        <div class="hotel-header">
            <div class="image-gallery">
                <div class="swiper">
                    <div class="swiper-wrapper" id="imageGallery">
                        <!-- Images will be populated here -->
                    </div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            
            <div class="hotel-info-header">
                <h1 class="hotel-title" id="hotelName">جاري التحميل...</h1>
                <div class="hotel-location" id="hotelLocation">
                    <i class="fas fa-map-marker-alt"></i>
                    جاري التحميل...
                </div>
                <div class="hotel-rating">
                    <div class="stars" id="hotelStars"></div>
                    <div class="rating-score" id="hotelScore">0.0</div>
                    <div class="reviews-count" id="reviewsCount">0 تقييم</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Hotel Details -->
            <div class="hotel-details">
                <div class="tabs">
                    <div class="tab active" data-tab="overview">نظرة عامة</div>
                    <div class="tab" data-tab="rooms">الغرف</div>
                    <div class="tab" data-tab="reviews">التقييمات</div>
                    <div class="tab" data-tab="location">الموقع</div>
                    <div class="tab" data-tab="policies">السياسات</div>
                </div>

                <!-- Overview Tab -->
                <div class="tab-content active" id="overview">
                    <div class="description" id="hotelDescription">
                        جاري تحميل وصف الفندق...
                    </div>
                    
                    <h3 style="margin-bottom: 20px; color: #333;">المرافق والخدمات</h3>
                    <div class="amenities-grid" id="amenitiesGrid">
                        <!-- Amenities will be populated here -->
                    </div>
                </div>

                <!-- Rooms Tab -->
                <div class="tab-content" id="rooms">
                    <h3 style="margin-bottom: 20px; color: #333;">أنواع الغرف المتاحة</h3>
                    <div class="room-types" id="roomTypes">
                        <!-- Room types will be populated here -->
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div class="tab-content" id="reviews">
                    <div class="review-summary">
                        <div class="review-score" id="overallScore">8.9</div>
                        <div>ممتاز</div>
                        <div style="color: #666; margin-top: 10px;">بناءً على 1,234 تقييم</div>
                        
                        <div class="review-categories">
                            <div class="review-category">
                                <span>النظافة</span>
                                <div class="review-bar">
                                    <div class="review-bar-fill" style="width: 92%"></div>
                                </div>
                                <span>9.2</span>
                            </div>
                            <div class="review-category">
                                <span>الموقع</span>
                                <div class="review-bar">
                                    <div class="review-bar-fill" style="width: 88%"></div>
                                </div>
                                <span>8.8</span>
                            </div>
                            <div class="review-category">
                                <span>الخدمة</span>
                                <div class="review-bar">
                                    <div class="review-bar-fill" style="width: 90%"></div>
                                </div>
                                <span>9.0</span>
                            </div>
                            <div class="review-category">
                                <span>القيمة مقابل المال</span>
                                <div class="review-bar">
                                    <div class="review-bar-fill" style="width: 85%"></div>
                                </div>
                                <span>8.5</span>
                            </div>
                        </div>
                    </div>

                    <div class="review-item">
                        <div class="review-header">
                            <div>
                                <div class="reviewer-name">أحمد محمد</div>
                                <div class="review-rating">★★★★★</div>
                            </div>
                            <div class="review-date">منذ أسبوع</div>
                        </div>
                        <p>إقامة رائعة! الفندق نظيف جداً والموقع ممتاز. الطاقم محترف ومتعاون. أنصح بشدة بهذا الفندق.</p>
                    </div>

                    <div class="review-item">
                        <div class="review-header">
                            <div>
                                <div class="reviewer-name">فاطمة علي</div>
                                <div class="review-rating">★★★★☆</div>
                            </div>
                            <div class="review-date">منذ أسبوعين</div>
                        </div>
                        <p>فندق جميل مع إطلالة رائعة. الغرف واسعة ومريحة. الإفطار متنوع ولذيذ. التجربة كانت ممتازة بشكل عام.</p>
                    </div>
                </div>

                <!-- Location Tab -->
                <div class="tab-content" id="location">
                    <h3 style="margin-bottom: 20px; color: #333;">موقع الفندق</h3>
                    <div class="map-placeholder">
                        <div>
                            <i class="fas fa-map-marker-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <div>خريطة تفاعلية للموقع</div>
                            <div style="font-size: 0.9rem; color: #999; margin-top: 5px;">
                                (في التطبيق الحقيقي ستظهر خريطة Google Maps)
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4 style="margin-bottom: 15px; color: #333;">المعالم القريبة</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9ff; border-radius: 8px;">
                                <span><i class="fas fa-building"></i> برج خليفة</span>
                                <span>2.5 كم</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9ff; border-radius: 8px;">
                                <span><i class="fas fa-shopping-bag"></i> دبي مول</span>
                                <span>1.8 كم</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9ff; border-radius: 8px;">
                                <span><i class="fas fa-plane"></i> مطار دبي الدولي</span>
                                <span>15 كم</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Policies Tab -->
                <div class="tab-content" id="policies">
                    <h3 style="margin-bottom: 20px; color: #333;">سياسات الفندق</h3>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">تسجيل الوصول والمغادرة</h4>
                        <p>• تسجيل الوصول: من الساعة 3:00 مساءً</p>
                        <p>• تسجيل المغادرة: حتى الساعة 12:00 ظهراً</p>
                        <p>• تسجيل الوصول المبكر والمغادرة المتأخرة متاحان حسب التوفر</p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">سياسة الإلغاء</h4>
                        <p>• إلغاء مجاني حتى 24 ساعة قبل تاريخ الوصول</p>
                        <p>• رسوم إلغاء 50% من قيمة الليلة الأولى بعد هذا التاريخ</p>
                        <p>• عدم الحضور: رسوم كامل قيمة الحجز</p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">القواعد العامة</h4>
                        <p>• التدخين ممنوع في جميع الغرف والمناطق المغلقة</p>
                        <p>• الحيوانات الأليفة غير مسموحة</p>
                        <p>• ساعات الهدوء من 10:00 مساءً حتى 7:00 صباحاً</p>
                        <p>• يُطلب إثبات هوية ساري المفعول عند تسجيل الوصول</p>
                    </div>

                    <div>
                        <h4 style="color: #667eea; margin-bottom: 10px;">الرسوم الإضافية</h4>
                        <p>• رسوم المنتجع: 50 ريال لكل ليلة</p>
                        <p>• موقف السيارات: 25 ريال لكل ليلة</p>
                        <p>• الإنترنت: مجاني في جميع المناطق</p>
                    </div>
                </div>
            </div>

            <!-- Booking Card -->
            <div class="booking-card">
                <div class="booking-price">
                    <div class="original-price" id="originalPrice">2,500 ريال</div>
                    <div class="current-price" id="currentPrice">1,899 ريال</div>
                    <div class="price-per-night">لكل ليلة</div>
                    <div class="discount-badge" id="discountBadge">خصم 24%</div>
                </div>

                <div class="booking-dates">
                    <div class="date-group">
                        <label>تاريخ الوصول</label>
                        <input type="date" id="checkinDate">
                    </div>
                    <div class="date-group">
                        <label>تاريخ المغادرة</label>
                        <input type="date" id="checkoutDate">
                    </div>
                    <div class="date-group">
                        <label>عدد البالغين</label>
                        <select id="adultsCount">
                            <option value="1">1 بالغ</option>
                            <option value="2">2 بالغين</option>
                            <option value="3">3 بالغين</option>
                            <option value="4">4 بالغين</option>
                        </select>
                    </div>
                </div>

                <div class="booking-summary">
                    <div class="summary-row">
                        <span>السعر لكل ليلة</span>
                        <span id="pricePerNight">1,899 ريال</span>
                    </div>
                    <div class="summary-row">
                        <span>عدد الليالي</span>
                        <span id="nightsCount">1</span>
                    </div>
                    <div class="summary-row">
                        <span>الضرائب والرسوم</span>
                        <span id="taxesAndFees">285 ريال</span>
                    </div>
                    <div class="summary-row total">
                        <span>المجموع الكلي</span>
                        <span id="totalPrice">2,184 ريال</span>
                    </div>
                </div>

                <button class="book-now-btn" onclick="proceedToBooking()">
                    <i class="fas fa-calendar-check"></i>
                    احجز الآن
                </button>

                <div class="secure-booking">
                    <i class="fas fa-shield-alt"></i>
                    حجز آمن ومضمون بتقنية Amadeus
                </div>
            </div>
        </div>

        <!-- Map Section -->
        <div class="map-section">
            <h3 style="margin-bottom: 20px; color: #333;">
                <i class="fas fa-map-marker-alt"></i>
                الموقع على الخريطة
            </h3>
            <div class="map-placeholder">
                <div>
                    <i class="fas fa-map" style="font-size: 3rem; margin-bottom: 15px; color: #667eea;"></i>
                    <div>خريطة تفاعلية لموقع الفندق</div>
                    <div style="font-size: 0.9rem; color: #999; margin-top: 10px;">
                        في التطبيق الحقيقي ستظهر خريطة Google Maps التفاعلية
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
    <script>
        // بيانات الفندق الوهمية
        const hotelData = {
            'h1': {
                name: 'برج العرب جميرا',
                location: 'جميرا، دبي، الإمارات العربية المتحدة',
                rating: 5,
                score: 9.2,
                reviewsCount: 1234,
                originalPrice: 2500,
                currentPrice: 1899,
                discount: 24,
                description: 'يقع برج العرب جميرا على جزيرة اصطناعية خاصة، ويُعتبر من أفخم الفنادق في العالم. يتميز الفندق بتصميمه المعماري الفريد على شكل شراع، ويوفر إطلالات خلابة على الخليج العربي. يضم الفندق مجموعة من أفخم الغرف والأجنحة، بالإضافة إلى مطاعم عالمية المستوى وسبا فاخر.',
                images: [
                    'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800',
                    'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=800',
                    'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800',
                    'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=800',
                    'https://images.unsplash.com/photo-1564501049412-61c2a3083791?w=800'
                ],
                amenities: [
                    { icon: 'fas fa-wifi', name: 'واي فاي مجاني' },
                    { icon: 'fas fa-swimming-pool', name: 'مسبح خارجي' },
                    { icon: 'fas fa-spa', name: 'سبا ومركز صحي' },
                    { icon: 'fas fa-utensils', name: '9 مطاعم ومقاهي' },
                    { icon: 'fas fa-car', name: 'موقف سيارات مجاني' },
                    { icon: 'fas fa-dumbbell', name: 'صالة رياضية' },
                    { icon: 'fas fa-concierge-bell', name: 'خدمة الغرف 24/7' },
                    { icon: 'fas fa-plane', name: 'خدمة المطار' },
                    { icon: 'fas fa-baby', name: 'خدمات الأطفال' },
                    { icon: 'fas fa-business-time', name: 'مركز أعمال' },
                    { icon: 'fas fa-water', name: 'شاطئ خاص' },
                    { icon: 'fas fa-cocktail', name: 'بار ولاونج' }
                ],
                roomTypes: [
                    {
                        name: 'جناح ديلوكس',
                        image: 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=300',
                        features: 'غرفة نوم منفصلة، صالة معيشة، إطلالة على البحر',
                        price: 1899
                    },
                    {
                        name: 'جناح بانوراما',
                        image: 'https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=300',
                        features: 'غرفتي نوم، صالة طعام، شرفة خاصة، إطلالة 360 درجة',
                        price: 2899
                    },
                    {
                        name: 'الجناح الملكي',
                        image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=300',
                        features: '3 غرف نوم، مكتب خاص، خدمة خاصة، مدخل منفصل',
                        price: 4999
                    }
                ]
            }
        };

        // متغيرات عامة
        let currentHotel = null;
        let searchParams = {};
        let swiper = null;

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            parseSearchParams();
            loadHotelData();
            setupTabs();
            setupBookingCalculator();
            initializeImageGallery();
        });

        // تحليل معاملات البحث
        function parseSearchParams() {
            const urlParams = new URLSearchParams(window.location.search);
            searchParams = {
                hotel: urlParams.get('hotel') || 'h1',
                checkin: urlParams.get('checkin') || '',
                checkout: urlParams.get('checkout') || '',
                adults: urlParams.get('adults') || '1'
            };
        }

        // تحميل بيانات الفندق
        function loadHotelData() {
            currentHotel = hotelData[searchParams.hotel] || hotelData['h1'];
            
            // تحديث معلومات الفندق
            document.getElementById('hotelName').textContent = currentHotel.name;
            document.getElementById('hotelLocation').innerHTML = `
                <i class="fas fa-map-marker-alt"></i>
                ${currentHotel.location}
            `;
            document.getElementById('hotelStars').textContent = '★'.repeat(currentHotel.rating);
            document.getElementById('hotelScore').textContent = currentHotel.score;
            document.getElementById('reviewsCount').textContent = `${currentHotel.reviewsCount.toLocaleString()} تقييم`;
            
            // تحديث الوصف
            document.getElementById('hotelDescription').textContent = currentHotel.description;
            
            // تحديث المرافق
            const amenitiesGrid = document.getElementById('amenitiesGrid');
            amenitiesGrid.innerHTML = currentHotel.amenities.map(amenity => `
                <div class="amenity-item">
                    <i class="${amenity.icon} amenity-icon"></i>
                    <span>${amenity.name}</span>
                </div>
            `).join('');
            
            // تحديث أنواع الغرف
            const roomTypes = document.getElementById('roomTypes');
            roomTypes.innerHTML = currentHotel.roomTypes.map(room => `
                <div class="room-card">
                    <div class="room-header">
                        <div class="room-image">
                            <img src="${room.image}" alt="${room.name}" loading="lazy">
                        </div>
                        <div class="room-info">
                            <h4>${room.name}</h4>
                            <div class="room-features">${room.features}</div>
                        </div>
                        <div class="room-price">
                            <div class="room-price-amount">${room.price.toLocaleString()} ريال</div>
                            <div class="room-price-per">لكل ليلة</div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // تحديث الأسعار
            updatePricing();
            
            // تحديث التواريخ
            if (searchParams.checkin) {
                document.getElementById('checkinDate').value = searchParams.checkin;
            }
            if (searchParams.checkout) {
                document.getElementById('checkoutDate').value = searchParams.checkout;
            }
            document.getElementById('adultsCount').value = searchParams.adults;
        }

        // تهيئة معرض الصور
        function initializeImageGallery() {
            const imageGallery = document.getElementById('imageGallery');
            imageGallery.innerHTML = currentHotel.images.map(image => `
                <div class="swiper-slide">
                    <img src="${image}" alt="${currentHotel.name}" loading="lazy">
                </div>
            `).join('');

            swiper = new Swiper('.swiper', {
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
            });
        }

        // إعداد التبويبات
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    
                    // إزالة الفئة النشطة من جميع التبويبات
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    // إضافة الفئة النشطة للتبويب المحدد
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });
        }

        // إعداد حاسبة الحجز
        function setupBookingCalculator() {
            const checkinDate = document.getElementById('checkinDate');
            const checkoutDate = document.getElementById('checkoutDate');
            const adultsCount = document.getElementById('adultsCount');

            [checkinDate, checkoutDate, adultsCount].forEach(element => {
                element.addEventListener('change', calculateBookingPrice);
            });

            calculateBookingPrice();
        }

        // حساب سعر الحجز
        function calculateBookingPrice() {
            const checkin = new Date(document.getElementById('checkinDate').value);
            const checkout = new Date(document.getElementById('checkoutDate').value);
            const adults = parseInt(document.getElementById('adultsCount').value);

            if (checkin && checkout && checkout > checkin) {
                const nights = Math.ceil((checkout - checkin) / (1000 * 60 * 60 * 24));
                const basePrice = currentHotel.currentPrice;
                const subtotal = basePrice * nights;
                const taxes = Math.round(subtotal * 0.15); // 15% ضرائب ورسوم
                const total = subtotal + taxes;

                document.getElementById('nightsCount').textContent = nights;
                document.getElementById('pricePerNight').textContent = `${basePrice.toLocaleString()} ريال`;
                document.getElementById('taxesAndFees').textContent = `${taxes.toLocaleString()} ريال`;
                document.getElementById('totalPrice').textContent = `${total.toLocaleString()} ريال`;
            }
        }

        // تحديث الأسعار
        function updatePricing() {
            document.getElementById('originalPrice').textContent = `${currentHotel.originalPrice.toLocaleString()} ريال`;
            document.getElementById('currentPrice').textContent = `${currentHotel.currentPrice.toLocaleString()} ريال`;
            document.getElementById('discountBadge').textContent = `خصم ${currentHotel.discount}%`;
        }

        // المتابعة للحجز
        function proceedToBooking() {
            const checkin = document.getElementById('checkinDate').value;
            const checkout = document.getElementById('checkoutDate').value;
            const adults = document.getElementById('adultsCount').value;

            if (!checkin || !checkout) {
                alert('يرجى تحديد تواريخ الوصول والمغادرة');
                return;
            }

            if (new Date(checkin) >= new Date(checkout)) {
                alert('تاريخ المغادرة يجب أن يكون بعد تاريخ الوصول');
                return;
            }

            // في التطبيق الحقيقي، سيتم التوجه لصفحة الدفع
            const nights = Math.ceil((new Date(checkout) - new Date(checkin)) / (1000 * 60 * 60 * 24));
            const total = document.getElementById('totalPrice').textContent;
            
            alert(`سيتم توجيهك لإتمام الحجز:\n\nالفندق: ${currentHotel.name}\nالتواريخ: ${checkin} إلى ${checkout}\nعدد الليالي: ${nights}\nعدد البالغين: ${adults}\nالمجموع: ${total}\n\nسيتم التوجه لصفحة الدفع الآمن...`);
            
            // تتبع الحدث
            trackEvent('booking_initiated', {
                hotel: currentHotel.name,
                checkin: checkin,
                checkout: checkout,
                adults: adults,
                nights: nights,
                total: total
            });
        }

        // العودة للنتائج
        function goBack() {
            if (document.referrer) {
                window.history.back();
            } else {
                window.location.href = 'amadeus_results.html';
            }
        }

        // تتبع الأحداث
        function trackEvent(eventName, eventData) {
            console.log('Analytics Event:', eventName, eventData);
        }

        // تتبع عرض تفاصيل الفندق
        trackEvent('hotel_details_viewed', {
            hotel: searchParams.hotel,
            hotelName: currentHotel?.name,
            checkin: searchParams.checkin,
            checkout: searchParams.checkout,
            adults: searchParams.adults
        });
    </script>
</body>
</html>

