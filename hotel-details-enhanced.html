<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل الفندق - Paygo.com</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: #f5f7fa;
            direction: rtl;
            min-height: 100vh;
        }

        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .back-btn {
            background: #f5f7fa;
            color: #667eea;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: #667eea;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .hotel-gallery {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            grid-template-rows: 300px 300px;
            gap: 10px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .gallery-main {
            grid-row: 1 / 3;
            grid-column: 1;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gallery-item img:hover {
            transform: scale(1.05);
        }

        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .section-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .hotel-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .hotel-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .hotel-location {
            color: #666;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hotel-rating-section {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }

        .stars {
            color: #ffd700;
            font-size: 1.5rem;
        }

        .review-badge {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .review-text {
            color: #666;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .amenity-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .amenity-item i {
            color: #667eea;
            font-size: 1.3rem;
        }

        .description-text {
            line-height: 1.8;
            color: #666;
            font-size: 1.05rem;
        }

        #map {
            height: 400px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .review-card {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reviewer-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .reviewer-name {
            font-weight: 600;
            color: #333;
        }

        .review-date {
            color: #999;
            font-size: 0.9rem;
        }

        .review-rating {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 8px;
            font-weight: 700;
        }

        .review-text {
            color: #666;
            line-height: 1.6;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .booking-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 100px;
        }

        .price-section {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            margin-bottom: 20px;
        }

        .price-label {
            font-size: 1rem;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .price-amount {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .price-night {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .booking-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 600;
            color: #333;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-family: 'Cairo', sans-serif;
            font-size: 1rem;
        }

        .book-now-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            margin-top: 10px;
        }

        .book-now-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .booking-providers {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e1e5e9;
        }

        .providers-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .provider-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .provider-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .provider-item:hover {
            background: #e9ecef;
            transform: translateX(-5px);
        }

        .provider-name {
            font-weight: 600;
            color: #333;
        }

        .provider-price {
            color: #667eea;
            font-weight: 700;
        }

        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }

            .booking-card {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .hotel-gallery {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(5, 200px);
            }

            .gallery-main {
                grid-row: 1;
                grid-column: 1;
            }

            .hotel-title {
                font-size: 1.8rem;
            }

            .price-amount {
                font-size: 2.2rem;
            }

            .amenities-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-plane"></i> Paygo.com
            </a>
            <button class="back-btn" onclick="history.back()">
                <i class="fas fa-arrow-right"></i>
                <span>العودة للنتائج</span>
            </button>
        </div>
    </header>

    <div class="container">
        <div class="hotel-gallery" id="hotelGallery"></div>

        <div class="content-grid">
            <div class="main-content">
                <!-- معلومات الفندق الأساسية -->
                <div class="section-card">
                    <div class="hotel-header">
                        <div>
                            <h1 class="hotel-title" id="hotelName"></h1>
                            <div class="hotel-location" id="hotelLocation"></div>
                            <div class="hotel-rating-section">
                                <div class="stars" id="hotelStars"></div>
                                <span class="review-badge" id="reviewScore"></span>
                                <span class="review-text" id="reviewText"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- المرافق -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-star"></i>
                        المرافق والخدمات
                    </h2>
                    <div class="amenities-grid" id="amenitiesList"></div>
                </div>

                <!-- الوصف -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-info-circle"></i>
                        عن الفندق
                    </h2>
                    <p class="description-text" id="hotelDescription"></p>
                </div>

                <!-- الخريطة -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-map-marked-alt"></i>
                        الموقع على الخريطة
                    </h2>
                    <div id="map"></div>
                </div>

                <!-- المراجعات -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-comments"></i>
                        مراجعات النزلاء
                    </h2>
                    <div class="reviews-list" id="reviewsList"></div>
                </div>
            </div>

            <!-- بطاقة الحجز -->
            <div class="sidebar">
                <div class="booking-card">
                    <div class="price-section">
                        <div class="price-label">السعر يبدأ من</div>
                        <div class="price-amount" id="hotelPrice"></div>
                        <div class="price-night">لليلة الواحدة</div>
                    </div>

                    <form class="booking-form" onsubmit="bookNow(event)">
                        <div class="form-group">
                            <label class="form-label">تاريخ الوصول</label>
                            <input type="date" class="form-input" id="checkinDate" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">تاريخ المغادرة</label>
                            <input type="date" class="form-input" id="checkoutDate" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">عدد الضيوف</label>
                            <select class="form-input" id="guestsCount">
                                <option value="1">1 ضيف</option>
                                <option value="2" selected>2 ضيف</option>
                                <option value="3">3 ضيوف</option>
                                <option value="4">4 ضيوف</option>
                                <option value="5">5 ضيوف</option>
                                <option value="6">6 ضيوف</option>
                            </select>
                        </div>
                        <button type="submit" class="book-now-btn">
                            <i class="fas fa-check-circle"></i>
                            احجز الآن
                        </button>
                    </form>

                    <div class="booking-providers">
                        <div class="providers-title">قارن الأسعار من:</div>
                        <div class="provider-list" id="providersList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const hotelData = JSON.parse(localStorage.getItem('selectedHotel'));
        const searchParams = JSON.parse(localStorage.getItem('searchParams'));

        // بيانات إضافية للفنادق
        const hotelDescriptions = {
            1: 'يقع برج العرب جميرا على جزيرة خاصة، ويعد أحد أفخم الفنادق في العالم. يوفر الفندق إطلالات خلابة على الخليج العربي وخدمة استثنائية على مدار الساعة. تم تصميم كل جناح على طابقين مع ديكورات فاخرة وتقنيات حديثة.',
            2: 'يقع أتلانتس النخلة في قمة نخلة جميرا الشهيرة، ويوفر تجربة فريدة مع حديقة مائية ضخمة وأكواريوم رائع. يضم الفندق مجموعة متنوعة من المطاعم الفاخرة والشاطئ الخاص.',
            3: 'يقع جميرا بيتش هوتيل على شاطئ خاص مع إطلالات مذهلة على برج العرب. يوفر الفندق أجواء عائلية راقية مع مرافق ترفيهية متنوعة ومطاعم عالمية.',
            4: 'يقع فندق العنوان داون تاون في قلب دبي بجوار برج خليفة ودبي مول. يوفر إطلالات بانورامية على المدينة وسهولة الوصول لجميع المعالم السياحية.',
            5: 'يعد جي دبليو ماريوت ماركيز أحد أطول فنادق العالم، ويقع في منطقة الخليج التجاري الحيوية. يوفر غرف فاخرة ومطاعم متنوعة ومرافق أعمال حديثة.'
        };

        const hotelReviews = [
            {
                name: 'أحمد محمد',
                rating: 9.5,
                date: '2024-11-15',
                text: 'تجربة رائعة! الفندق نظيف جداً والموظفون محترفون. الموقع ممتاز والإطلالة خيالية. أنصح بشدة بالإقامة هنا.'
            },
            {
                name: 'فاطمة علي',
                rating: 9.0,
                date: '2024-11-10',
                text: 'فندق فاخر بكل المقاييس. الغرف واسعة ومريحة، المطاعم متنوعة ولذيذة. الخدمة ممتازة والأسعار معقولة مقارنة بالجودة.'
            },
            {
                name: 'خالد السعيد',
                rating: 8.5,
                date: '2024-11-05',
                text: 'إقامة جميلة مع العائلة. المسبح رائع والأطفال استمتعوا كثيراً. الموقع قريب من المعالم السياحية. سنعود بالتأكيد!'
            },
            {
                name: 'مريم أحمد',
                rating: 9.2,
                date: '2024-10-28',
                text: 'أفضل فندق أقمت فيه في دبي. النظافة ممتازة، الموظفون ودودون جداً، والإفطار متنوع وشهي. تجربة لا تنسى!'
            }
        ];

        const bookingProviders = [
            { name: 'Booking.com', price: hotelData?.price || 1500, url: 'https://www.booking.com' },
            { name: 'Agoda', price: (hotelData?.price || 1500) + 50, url: 'https://www.agoda.com' },
            { name: 'Expedia', price: (hotelData?.price || 1500) + 100, url: 'https://www.expedia.com' },
            { name: 'Hotels.com', price: (hotelData?.price || 1500) + 80, url: 'https://www.hotels.com' }
        ];

        // عرض معرض الصور
        function displayGallery() {
            const gallery = document.getElementById('hotelGallery');
            const images = [
                hotelData.image,
                'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=800',
                'https://images.unsplash.com/photo-1578683010236-d716f9a3f461?w=800',
                'https://images.unsplash.com/photo-1596436889106-be35e843f974?w=800',
                'https://images.unsplash.com/photo-1611892440504-42a792e24d32?w=800'
            ];

            gallery.innerHTML = images.map((img, index) => `
                <div class="gallery-item ${index === 0 ? 'gallery-main' : ''}">
                    <img src="${img}" alt="صورة ${index + 1}">
                </div>
            `).join('');
        }

        // عرض معلومات الفندق
        function displayHotelInfo() {
            document.getElementById('hotelName').textContent = hotelData.name;
            document.getElementById('hotelLocation').innerHTML = `
                <i class="fas fa-map-marker-alt"></i>
                <span>${hotelData.location}</span>
            `;

            const stars = '★'.repeat(hotelData.rating) + '☆'.repeat(5 - hotelData.rating);
            document.getElementById('hotelStars').textContent = stars;
            document.getElementById('reviewScore').textContent = hotelData.reviewScore;
            document.getElementById('reviewText').textContent = `ممتاز (${hotelData.reviewCount} تقييم)`;

            document.getElementById('hotelPrice').textContent = `${hotelData.price} ${hotelData.currency}`;
            document.getElementById('hotelDescription').textContent = hotelDescriptions[hotelData.id] || 'فندق فاخر يوفر جميع وسائل الراحة والرفاهية للنزلاء.';
        }

        // عرض المرافق
        function displayAmenities() {
            const amenitiesNames = {
                'wifi': { icon: 'fa-wifi', name: 'واي فاي مجاني' },
                'pool': { icon: 'fa-swimming-pool', name: 'مسبح' },
                'parking': { icon: 'fa-parking', name: 'موقف سيارات مجاني' },
                'restaurant': { icon: 'fa-utensils', name: 'مطعم' },
                'gym': { icon: 'fa-dumbbell', name: 'صالة رياضية' },
                'spa': { icon: 'fa-spa', name: 'سبا ومركز صحي' }
            };

            const amenitiesList = document.getElementById('amenitiesList');
            amenitiesList.innerHTML = hotelData.amenities.map(amenity => {
                const info = amenitiesNames[amenity];
                return `
                    <div class="amenity-item">
                        <i class="fas ${info.icon}"></i>
                        <span>${info.name}</span>
                    </div>
                `;
            }).join('');
        }

        // عرض الخريطة
        function displayMap() {
            // إحداثيات افتراضية لدبي
            const coordinates = [25.2048, 55.2708];
            
            const map = L.map('map').setView(coordinates, 13);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);

            L.marker(coordinates).addTo(map)
                .bindPopup(`<b>${hotelData.name}</b><br>${hotelData.location}`)
                .openPopup();
        }

        // عرض المراجعات
        function displayReviews() {
            const reviewsList = document.getElementById('reviewsList');
            reviewsList.innerHTML = hotelReviews.map(review => `
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">${review.name.charAt(0)}</div>
                            <div>
                                <div class="reviewer-name">${review.name}</div>
                                <div class="review-date">${new Date(review.date).toLocaleDateString('ar-SA')}</div>
                            </div>
                        </div>
                        <div class="review-rating">${review.rating}</div>
                    </div>
                    <p class="review-text">${review.text}</p>
                </div>
            `).join('');
        }

        // عرض مواقع الحجز
        function displayProviders() {
            const providersList = document.getElementById('providersList');
            providersList.innerHTML = bookingProviders.map(provider => `
                <div class="provider-item" onclick="window.open('${provider.url}', '_blank')">
                    <span class="provider-name">${provider.name}</span>
                    <span class="provider-price">${provider.price} ريال</span>
                </div>
            `).join('');
        }

        // معالج الحجز
        function bookNow(event) {
            event.preventDefault();
            
            const checkin = document.getElementById('checkinDate').value;
            const checkout = document.getElementById('checkoutDate').value;
            const guests = document.getElementById('guestsCount').value;

            // حفظ بيانات الحجز
            const bookingData = {
                hotel: hotelData,
                checkin,
                checkout,
                guests,
                totalPrice: hotelData.price * calculateNights(checkin, checkout)
            };

            localStorage.setItem('bookingData', JSON.stringify(bookingData));
            
            // الانتقال لصفحة تأكيد الحجز
            alert('سيتم توجيهك لإتمام الحجز عبر Booking.com');
            window.open('https://www.booking.com', '_blank');
        }

        // حساب عدد الليالي
        function calculateNights(checkin, checkout) {
            const date1 = new Date(checkin);
            const date2 = new Date(checkout);
            const diffTime = Math.abs(date2 - date1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        // تعيين التواريخ الافتراضية
        function setDefaultDates() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dayAfter = new Date(today);
            dayAfter.setDate(dayAfter.getDate() + 2);

            document.getElementById('checkinDate').value = tomorrow.toISOString().split('T')[0];
            document.getElementById('checkoutDate').value = dayAfter.toISOString().split('T')[0];
        }

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            if (!hotelData) {
                window.location.href = 'index.html';
                return;
            }

            displayGallery();
            displayHotelInfo();
            displayAmenities();
            displayMap();
            displayReviews();
            displayProviders();
            setDefaultDates();
        });
    </script>
</body>
</html>
